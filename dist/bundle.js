/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},e=function e(i,n,s){return t(n=n||[])?s||(s={}):(s=n,n=[]),i instanceof RegExp?function(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return c(t,e)}(i,n):t(i)?function(t,i,n){for(var s=[],a=0;a<t.length;a++)s.push(e(t[a],i,n).source);return c(new RegExp("(?:"+s.join("|")+")",p(n)),i)}(i,n,s):function(t,e,i){for(var n=r(t),s=d(n,i),a=0;a<n.length;a++)"string"!=typeof n[a]&&e.push(n[a]);return c(s,e)}(i,n,s)},i=r,n=o,s=d,a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function r(t){for(var e,i=[],n=0,s=0,r="";null!=(e=a.exec(t));){var o=e[0],l=e[1],c=e.index;if(r+=t.slice(s,c),s=c+o.length,l)r+=l[1];else{r&&(i.push(r),r="");var p=e[2],d=e[3],u=e[4],f=e[5],v=e[6],m=e[7],g="+"===v||"*"===v,_="?"===v||"*"===v,$=p||"/",b=u||f||(m?".*":"[^"+$+"]+?");i.push({name:d||n++,prefix:p||"",delimiter:$,optional:_,repeat:g,pattern:h(b)})}}return s<t.length&&(r+=t.substr(s)),r&&i.push(r),i}function o(e){for(var i=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(i[n]=new RegExp("^"+e[n].pattern+"$"));return function(n){for(var s="",a=n||{},r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o){var l,h=a[o.name];if(null==h){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to be defined')}if(t(h)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but received "'+h+'"');if(0===h.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var c=0;c<h.length;c++){if(l=encodeURIComponent(h[c]),!i[r].test(l))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but received "'+l+'"');s+=(0===c?o.prefix:o.delimiter)+l}}else{if(l=encodeURIComponent(h),!i[r].test(l))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but received "'+l+'"');s+=o.prefix+l}}else s+=o}return s}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function h(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function c(t,e){return t.keys=e,t}function p(t){return t.sensitive?"":"i"}function d(t,e){for(var i=(e=e||{}).strict,n=!1!==e.end,s="",a=t[t.length-1],r="string"==typeof a&&/\/$/.test(a),o=0;o<t.length;o++){var h=t[o];if("string"==typeof h)s+=l(h);else{var c=l(h.prefix),d=h.pattern;h.repeat&&(d+="(?:"+c+d+")*"),s+=d=h.optional?c?"(?:"+c+"("+d+"))?":"("+d+")?":c+"("+d+")"}}return i||(s=(r?s.slice(0,-2):s)+"(?:\\/(?=$))?"),s+=n?"$":i&&r?"":"(?=\\/|$)",new RegExp("^"+s,p(e))}e.parse=i,e.compile=function(t){return o(r(t))},e.tokensToFunction=n,e.tokensToRegExp=s;var u,f="undefined"!=typeof document,v="undefined"!=typeof window,m="undefined"!=typeof history,g="undefined"!=typeof process,_=f&&document.ontouchstart?"touchstart":"click",$=v&&!(!window.history.location&&!window.location);function b(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function y(t,e){if("function"==typeof t)return y.call(this,"*",t);if("function"==typeof e)for(var i=new x(t,null,this),n=1;n<arguments.length;++n)this.callbacks.push(i.middleware(arguments[n]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function w(t){if(!t.handled){var e=this,i=e._window;(e._hashbang?$&&this._getBase()+i.location.hash.replace("#!",""):$&&i.location.pathname+i.location.search)!==t.canonicalPath&&(e.stop(),t.handled=!1,$&&(i.location.href=t.canonicalPath))}}function A(t,e,i){var n=this.page=i||y,s=n._window,a=n._hashbang,r=n._getBase();"/"===t[0]&&0!==t.indexOf(r)&&(t=r+(a?"#!":"")+t);var o=t.indexOf("?");this.canonicalPath=t;var l=new RegExp("^"+function(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}(r));if(this.path=t.replace(l,"")||"/",a&&(this.path=this.path.replace("#!","")||"/"),this.title=f&&s.document.title,this.state=e||{},this.state.path=t,this.querystring=~o?n._decodeURLEncodedURIComponent(t.slice(o+1)):"",this.pathname=n._decodeURLEncodedURIComponent(~o?t.slice(0,o):t),this.params={},this.hash="",!a){if(!~this.path.indexOf("#"))return;var h=this.path.split("#");this.path=this.pathname=h[0],this.hash=n._decodeURLEncodedURIComponent(h[1])||"",this.querystring=this.querystring.split("#")[0]}}function x(t,i,n){var s=this.page=n||E,a=i||{};a.strict=a.strict||s._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=e(this.path,this.keys=[],a)}b.prototype.configure=function(t){var e=t||{};this._window=e.window||v&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&v,this._click=!1!==e.click&&f,this._hashbang=!!e.hashbang;var i=this._window;this._popstate?i.addEventListener("popstate",this._onpopstate,!1):v&&i.removeEventListener("popstate",this._onpopstate,!1),this._click?i.document.addEventListener(_,this.clickHandler,!1):f&&i.document.removeEventListener(_,this.clickHandler,!1),this._hashbang&&v&&!m?i.addEventListener("hashchange",this._onpopstate,!1):v&&i.removeEventListener("hashchange",this._onpopstate,!1)},b.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},b.prototype._getBase=function(){var t=this._base;if(t)return t;var e=v&&this._window&&this._window.location;return v&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},b.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},b.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var i;if(this._running=!0,$){var n=this._window.location;i=this._hashbang&&~n.hash.indexOf("#!")?n.hash.substr(2)+n.search:this._hashbang?n.search+n.hash:n.pathname+n.search+n.hash}this.replace(i,null,!0,e.dispatch)}},b.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(_,this.clickHandler,!1),v&&t.removeEventListener("popstate",this._onpopstate,!1),v&&t.removeEventListener("hashchange",this._onpopstate,!1)}},b.prototype.show=function(t,e,i,n){var s=new A(t,e,this),a=this.prevContext;return this.prevContext=s,this.current=s.path,!1!==i&&this.dispatch(s,a),!1!==s.handled&&!1!==n&&s.pushState(),s},b.prototype.back=function(t,e){var i=this;if(this.len>0){var n=this._window;m&&n.history.back(),this.len--}else t?setTimeout((function(){i.show(t,e)})):setTimeout((function(){i.show(i._getBase(),e)}))},b.prototype.redirect=function(t,e){var i=this;"string"==typeof t&&"string"==typeof e&&y.call(this,t,(function(t){setTimeout((function(){i.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){i.replace(t)}),0)},b.prototype.replace=function(t,e,i,n){var s=new A(t,e,this),a=this.prevContext;return this.prevContext=s,this.current=s.path,s.init=i,s.save(),!1!==n&&this.dispatch(s,a),s},b.prototype.dispatch=function(t,e){var i=0,n=0,s=this;function a(){var e=s.callbacks[i++];if(t.path===s.current)return e?void e(t,a):w.call(s,t);t.handled=!1}e?function t(){var i=s.exits[n++];if(!i)return a();i(e,t)}():a()},b.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var i=new x(t,null,this),n=1;n<arguments.length;++n)this.exits.push(i.middleware(arguments[n]))},b.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,i=t.path||(t.composedPath?t.composedPath():null);if(i)for(var n=0;n<i.length;n++)if(i[n].nodeName&&"A"===i[n].nodeName.toUpperCase()&&i[n].href){e=i[n];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var s="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var a=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==a)&&!(a&&a.indexOf("mailto:")>-1)&&!(s?e.target.baseVal:e.target)&&(s||this.sameOrigin(e.href))){var r=s?e.href.baseVal:e.pathname+e.search+(e.hash||"");r="/"!==r[0]?"/"+r:r,g&&r.match(/^\/[a-zA-Z]:\//)&&(r=r.replace(/^\/[a-zA-Z]:\//,"/"));var o=r,l=this._getBase();0===r.indexOf(l)&&(r=r.substr(l.length)),this._hashbang&&(r=r.replace("#!","")),(!l||o!==r||$&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(o))}}}}},b.prototype._onpopstate=(u=!1,v?(f&&"complete"===document.readyState?u=!0:window.addEventListener("load",(function(){setTimeout((function(){u=!0}),0)})),function(t){if(u){var e=this;if(t.state){var i=t.state.path;e.replace(i,t.state)}else if($){var n=e._window.location;e.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}}):function(){}),b.prototype._which=function(t){return null==(t=t||v&&this._window.event).which?t.button:t.which},b.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&$)return new URL(t,e.location.toString());if(f){var i=e.document.createElement("a");return i.href=t,i}},b.prototype.sameOrigin=function(t){if(!t||!$)return!1;var e=this._toURL(t),i=this._window.location;return i.protocol===e.protocol&&i.hostname===e.hostname&&(i.port===e.port||""===i.port&&(80==e.port||443==e.port))},b.prototype._samePath=function(t){if(!$)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},b.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},A.prototype.pushState=function(){var t=this.page,e=t._window,i=t._hashbang;t.len++,m&&e.history.pushState(this.state,this.title,i&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},A.prototype.save=function(){var t=this.page;m&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},x.prototype.middleware=function(t){var e=this;return function(i,n){if(e.match(i.path,i.params))return i.routePath=e.path,t(i,n);n()}},x.prototype.match=function(t,e){var i=this.keys,n=t.indexOf("?"),s=~n?t.slice(0,n):t,a=this.regexp.exec(decodeURIComponent(s));if(!a)return!1;delete e[0];for(var r=1,o=a.length;r<o;++r){var l=i[r-1],h=this.page._decodeURLEncodedURIComponent(a[r]);void 0===h&&hasOwnProperty.call(e,l.name)||(e[l.name]=h)}return!0};var E=function t(){var e=new b;function i(){return y.apply(e,arguments)}return i.callbacks=e.callbacks,i.exits=e.exits,i.base=e.base.bind(e),i.strict=e.strict.bind(e),i.start=e.start.bind(e),i.stop=e.stop.bind(e),i.show=e.show.bind(e),i.back=e.back.bind(e),i.redirect=e.redirect.bind(e),i.replace=e.replace.bind(e),i.dispatch=e.dispatch.bind(e),i.exit=e.exit.bind(e),i.configure=e.configure.bind(e),i.sameOrigin=e.sameOrigin.bind(e),i.clickHandler=e.clickHandler.bind(e),i.create=t,Object.defineProperty(i,"len",{get:function(){return e.len},set:function(t){e.len=t}}),Object.defineProperty(i,"current",{get:function(){return e.current},set:function(t){e.current=t}}),i.Context=A,i.Route=x,i}(),k=E,H=E;k.default=H;const C=k,S="http://localhost:3030/users",U="user",R=t=>{t&&localStorage.setItem(U,JSON.stringify(t))},T=()=>{let t=localStorage.getItem(U);if(t)return JSON.parse(t)};var I;const L=window,N=L.trustedTypes,P=N?N.createPolicy("lit-html",{createHTML:t=>t}):void 0,O="$lit$",j=`lit$${(Math.random()+"").slice(9)}$`,M="?"+j,D=`<${M}>`,B=document,z=()=>B.createComment(""),V=t=>null===t||"object"!=typeof t&&"function"!=typeof t,W=Array.isArray,q="[ \t\n\f\r]",J=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,F=/-->/g,G=/>/g,K=RegExp(`>|${q}(?:([^\\s"'>=/]+)(${q}*=${q}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Z=/'/g,X=/"/g,Q=/^(?:script|style|textarea|title)$/i,Y=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),tt=Y(1),et=(Y(2),Symbol.for("lit-noChange")),it=Symbol.for("lit-nothing"),nt=new WeakMap,st=B.createTreeWalker(B,129,null,!1);function at(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==P?P.createHTML(e):e}const rt=(t,e)=>{const i=t.length-1,n=[];let s,a=2===e?"<svg>":"",r=J;for(let e=0;e<i;e++){const i=t[e];let o,l,h=-1,c=0;for(;c<i.length&&(r.lastIndex=c,l=r.exec(i),null!==l);)c=r.lastIndex,r===J?"!--"===l[1]?r=F:void 0!==l[1]?r=G:void 0!==l[2]?(Q.test(l[2])&&(s=RegExp("</"+l[2],"g")),r=K):void 0!==l[3]&&(r=K):r===K?">"===l[0]?(r=null!=s?s:J,h=-1):void 0===l[1]?h=-2:(h=r.lastIndex-l[2].length,o=l[1],r=void 0===l[3]?K:'"'===l[3]?X:Z):r===X||r===Z?r=K:r===F||r===G?r=J:(r=K,s=void 0);const p=r===K&&t[e+1].startsWith("/>")?" ":"";a+=r===J?i+D:h>=0?(n.push(o),i.slice(0,h)+O+i.slice(h)+j+p):i+j+(-2===h?(n.push(void 0),e):p)}return[at(t,a+(t[i]||"<?>")+(2===e?"</svg>":"")),n]};class ot{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,a=0;const r=t.length-1,o=this.parts,[l,h]=rt(t,e);if(this.el=ot.createElement(l,i),st.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=st.nextNode())&&o.length<r;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith(O)||e.startsWith(j)){const i=h[a++];if(t.push(e),void 0!==i){const t=n.getAttribute(i.toLowerCase()+O).split(j),e=/([.?@])?(.*)/.exec(i);o.push({type:1,index:s,name:e[2],strings:t,ctor:"."===e[1]?dt:"?"===e[1]?ft:"@"===e[1]?vt:pt})}else o.push({type:6,index:s})}for(const e of t)n.removeAttribute(e)}if(Q.test(n.tagName)){const t=n.textContent.split(j),e=t.length-1;if(e>0){n.textContent=N?N.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],z()),st.nextNode(),o.push({type:2,index:++s});n.append(t[e],z())}}}else if(8===n.nodeType)if(n.data===M)o.push({type:2,index:s});else{let t=-1;for(;-1!==(t=n.data.indexOf(j,t+1));)o.push({type:7,index:s}),t+=j.length-1}s++}}static createElement(t,e){const i=B.createElement("template");return i.innerHTML=t,i}}function lt(t,e,i=t,n){var s,a,r,o;if(e===et)return e;let l=void 0!==n?null===(s=i._$Co)||void 0===s?void 0:s[n]:i._$Cl;const h=V(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==h&&(null===(a=null==l?void 0:l._$AO)||void 0===a||a.call(l,!1),void 0===h?l=void 0:(l=new h(t),l._$AT(t,i,n)),void 0!==n?(null!==(r=(o=i)._$Co)&&void 0!==r?r:o._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(e=lt(t,l._$AS(t,e.values),l,n)),e}class ht{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:i},parts:n}=this._$AD,s=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:B).importNode(i,!0);st.currentNode=s;let a=st.nextNode(),r=0,o=0,l=n[0];for(;void 0!==l;){if(r===l.index){let e;2===l.type?e=new ct(a,a.nextSibling,this,t):1===l.type?e=new l.ctor(a,l.name,l.strings,this,t):6===l.type&&(e=new mt(a,this,t)),this._$AV.push(e),l=n[++o]}r!==(null==l?void 0:l.index)&&(a=st.nextNode(),r++)}return st.currentNode=B,s}v(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class ct{constructor(t,e,i,n){var s;this.type=2,this._$AH=it,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cp=null===(s=null==n?void 0:n.isConnected)||void 0===s||s}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=lt(this,t,e),V(t)?t===it||null==t||""===t?(this._$AH!==it&&this._$AR(),this._$AH=it):t!==this._$AH&&t!==et&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>W(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==it&&V(this._$AH)?this._$AA.nextSibling.data=t:this.$(B.createTextNode(t)),this._$AH=t}g(t){var e;const{values:i,_$litType$:n}=t,s="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=ot.createElement(at(n.h,n.h[0]),this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===s)this._$AH.v(i);else{const t=new ht(s,this),e=t.u(this.options);t.v(i),this.$(e),this._$AH=t}}_$AC(t){let e=nt.get(t.strings);return void 0===e&&nt.set(t.strings,e=new ot(t)),e}T(t){W(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const s of t)n===e.length?e.push(i=new ct(this.k(z()),this.k(z()),this,this.options)):i=e[n],i._$AI(s),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class pt{constructor(t,e,i,n,s){this.type=1,this._$AH=it,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=it}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,n){const s=this.strings;let a=!1;if(void 0===s)t=lt(this,t,e,0),a=!V(t)||t!==this._$AH&&t!==et,a&&(this._$AH=t);else{const n=t;let r,o;for(t=s[0],r=0;r<s.length-1;r++)o=lt(this,n[i+r],e,r),o===et&&(o=this._$AH[r]),a||(a=!V(o)||o!==this._$AH[r]),o===it?t=it:t!==it&&(t+=(null!=o?o:"")+s[r+1]),this._$AH[r]=o}a&&!n&&this.j(t)}j(t){t===it?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class dt extends pt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===it?void 0:t}}const ut=N?N.emptyScript:"";class ft extends pt{constructor(){super(...arguments),this.type=4}j(t){t&&t!==it?this.element.setAttribute(this.name,ut):this.element.removeAttribute(this.name)}}class vt extends pt{constructor(t,e,i,n,s){super(t,e,i,n,s),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=lt(this,t,e,0))&&void 0!==i?i:it)===et)return;const n=this._$AH,s=t===it&&n!==it||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,a=t!==it&&(n===it||s);s&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class mt{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){lt(this,t)}}const gt=L.litHtmlPolyfillSupport;null==gt||gt(ot,ct),(null!==(I=L.litHtmlVersions)&&void 0!==I?I:L.litHtmlVersions=[]).push("2.8.0");const _t=tt`
    <li class="nav-item">
        <a class="nav-link" href="/login">Login</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/register">Register</a>
    </li>
`,$t=tt`
    <li class="nav-item">
        <a class="nav-link" href="/collection">My Collection</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/logout">Logout</a>
    </li>
`,bt=t=>{t.preventDefault();let e=new FormData(t.currentTarget).get("search");C.redirect(`/movies?search=${e}`)},yt=({user:t,isAuthenticated:e})=>tt`
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Movies</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Home</a>
                    </li>
                    ${e?$t:_t}
                </ul>

                ${e?tt`
                        <div class="nav-item">
                            <span class="nav-link disabled">${t.username}</span>
                        </div>
                    `:it}
                
                <form class="d-flex" @submit=${bt}>
                    <input class="form-control me-2" type="search" name="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>
`,wt=document.querySelector("#root"),At=(t,e)=>{((t,e,i)=>{const n=(void 0,e);let s=n._$litPart$;if(void 0===s){const t=(void 0,null);n._$litPart$=s=new ct(e.insertBefore(z(),t),t,void 0,{})}s._$AI(t)})(tt`
        <nav>
            ${yt(t)}
        </nav>
        <main>
            ${e}
        </main>
        <footer class="footer">
            <p>All rights reserved &copy; SoftUni 2022</p>
        </footer>
    `,wt)},xt=(t,e,i)=>{let n={},s=(()=>{let t=T();return t?.accessToken})();return"GET"!=t&&(n={method:t,headers:{"content-type":"application/json"}}),s&&(n.headers={...n.headers,"X-Authorization":s}),i&&(n.body=JSON.stringify(i)),fetch(e,n).then((t=>t.json()))},Et=xt.bind(null,"GET"),kt=xt.bind(null,"POST"),Ht=(xt.bind(null,"PUT"),xt.bind(null,"PATCH"),xt.bind(null,"DELETE")),Ct="http://localhost:3030/data/movies",St=(t,e)=>{let i=[];if(t){let e="where="+encodeURIComponent(`title LIKE "${t}"`);i.push(e)}e&&(i.push("offset="+5*(e-1)),i.push("pageSize=5"));let n=i.length?`?${i.join("&")}`:"";return fetch(Ct+n).then((t=>t.json()))},Ut=t=>{let e=new URLSearchParams(t.querystring);const i=Number(e.get("page"));Promise.all([Et(`${Ct}?count`),St(e.get("search"),i||1)]).then((([e,n])=>{t.render(((t,e)=>{return tt`
    <h1>Movie List</h1>
    
    <div class="movie-list">
        ${t.map((t=>{return tt`
    <div class="card movie-card">
        <img src=${(e=t).posterUrl} class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title">${e.title}</h5>
            <a href="/movies/${e._id}" class="btn btn-primary">Details</a>
        </div>
    </div>
`;var e}))}
    </div>
    
    <nav class="pagination" aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item ${1==e?"disabled":it}"><a class="page-link" href="/movies?page=${i=e,Math.max(1,i-1)}">Previous</a></li>
            ${function(t,e,i){let n=Math.max(t-1,1);return[n,n+1,n+2]}(e).map((t=>tt`<li class="page-item ${e==t?"active":it}"><a class="page-link" href="/movies?page=${t}">${t}</a></li>`))}
            <li class="page-item"><a class="page-link" href="/movies?page=${(t=>t+1)(e)}">Next</a></li>
        </ul>
    </nav>
`;var i})(n,i))}))},Rt="http://localhost:3030/data/likes";C(((t,e)=>{let i=T();t.user=i,t.isAuthenticated=Boolean(i?.username),e()})),C(((t,e)=>{t.render=At.bind(null,t),e()})),C("/",Ut),C("/login",(t=>{t.render(tt`
    <div class="login-page">
        <h1>Login Page</h1>
    
        <form @submit=${e=>{e.preventDefault();let{email:i,password:n}=Object.fromEntries(new FormData(e.currentTarget));((t,e)=>fetch(`${S}/login`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:e})}).then((t=>t.json())).then((t=>(R(t),t))))(i,n).then((e=>{t.page.redirect("/"),console.log("User is logged in")}))}}>
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Email address</label>
                <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
            </div>
            <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label">Password</label>
                <input type="password" name="password" class="form-control" id="exampleInputPassword1">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
`)})),C("/logout",(t=>{(()=>{let t=localStorage.getItem("accessToken");return fetch(`${S}/logout`,{headers:{"X-Authorization":t}}).then((t=>{console.log(t),localStorage.clear()}))})().then((()=>{t.page.redirect("/")}))})),C("/register",(t=>{t.render(tt`
    <div class="login-page">
        <h1>Register Page</h1>
    
        <form @submit=${e=>{e.preventDefault();let{email:i,password:n,username:s}=Object.fromEntries(new FormData(e.currentTarget));((t,e,i)=>fetch(`${S}/register`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:e,username:i})}).then((t=>t.json())).then((t=>(R(t),t))))(i,n,s).then((e=>{t.page.redirect("/"),console.log("User is registered")}))}}>
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Email address</label>
                <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
            </div>
            <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label">Password</label>
                <input type="password" name="password" class="form-control" id="exampleInputPassword1">
            </div>
            <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="username" name="username" class="form-control" id="username">
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </form>
    </div>
`)})),C("/movies/:movieId",(async t=>{let e=t.params.movieId,i=await(t=>fetch(`${Ct}/${t}`).then((t=>t.json())))(e),n=await(t=>{let e=encodeURIComponent(`movieId="${t}"`);return Et(`${Rt}?where=${e}`)})(e);i.likes=n.length;let s=n.some((e=>e._ownerId==t.user._id));t.render(((i,n,s,a)=>tt`
    <div class="card mb-3" style="max-width: 540px;">
        <div class="row g-0">
            <div class="col-md-4">
                <img src=${i.posterUrl} class="img-fluid rounded-start" alt=${i.title}>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title">${i.title}</h5>
                    <p class="card-text">${i.description}</p>
                    <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                    ${n?tt`<button @click=${async()=>{let i=await((t,e)=>{let i=encodeURIComponent(`movieId = "${t}" AND _ownerId = "${e}"`);return Et(`${Rt}?where=${i}&pageSize=1`).then((t=>t[0]))})(e,t.user._id);var n;await(n=i._id,Ht(`${Rt}/${n}`)),t.page.redirect(`/movies/${e}`)}} class="btn btn-primary">Unlike</button>`:tt`<button @click=${()=>{(t=>kt(Rt,{movieId:t}))(e).then((()=>{t.page.redirect(`/movies/${e}`)}))}} class="btn btn-primary">Like</button>`}
                    
                    <span>Likes: ${i.likes}</span>
                </div>
            </div>
        </div>
    </div>
`)(i,s))})),C("/movies",Ut),C.start()})();